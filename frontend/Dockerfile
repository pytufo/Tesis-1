FROM node:18-buster-slim

ARG NODE_ENV=production
ENV NODE_ENV $NODE_ENV

ARG PORT=19006
ENV PORT $PORT
EXPOSE $PORT

# Crear directorio de la aplicaci贸n
WORKDIR /opt/frontend/app

# Copiar solo los archivos de configuraci贸n necesarios
COPY ./package.json ./package-lock.json ./

# Instalar dependencias
RUN npm install

# Copiar el resto de la aplicaci贸n
COPY . .

# Entrypoint para iniciar la aplicaci贸n
ENTRYPOINT [ "npm", "run", "web" ]