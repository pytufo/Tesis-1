{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar UserContext = createContext();\nvar UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setUserInfo = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoggedin = _useState4[0],\n    setIsLoggedIn = _useState4[1];\n  var storeUserInfo = function () {\n    var _ref2 = _asyncToGenerator(function* (user) {\n      try {\n        yield AsyncStorage.setItem(\"user_info\", JSON.stringify(user));\n        setUserInfo(user);\n        setIsLoggedIn(true);\n      } catch (error) {\n        console.error(\"Error al obtener la informacion del usuario;  \", error);\n      }\n    });\n    return function storeUserInfo(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var checkAuthentication = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var token = yield AsyncStorage.getItem(\"access_token\");\n        setIsLoggedIn(!!token);\n      } catch (error) {\n        console.error(\"Error al autenticar\", error);\n      }\n    });\n    return function checkAuthentication() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var clearUserInfo = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem(\"user_info\");\n        setUserInfo(null);\n        setIsLoggedIn(false);\n      } catch (error) {\n        console.error(\"Error al limpiar la informaci贸n del usuario:\", error);\n      }\n    });\n    return function clearUserInfo() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var loadUserInfo = function () {\n      var _ref5 = _asyncToGenerator(function* () {\n        try {\n          var storedUserInfo = yield AsyncStorage.getItem(\"user_info\");\n          if (storedUserInfo) {\n            setUserInfo(JSON.parse(storedUserInfo));\n            setIsLoggedIn(true);\n          }\n        } catch (error) {\n          console.error(\"Error al cargar la informaci贸n del usuario:\", error);\n        }\n      });\n      return function loadUserInfo() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    loadUserInfo();\n    checkAuthentication();\n  }, []);\n  return _jsx(UserContext.Provider, {\n    value: {\n      userInfo: userInfo,\n      storeUserInfo: storeUserInfo,\n      clearUserInfo: clearUserInfo,\n      isLoggedin: isLoggedin\n    },\n    children: children\n  });\n};\nvar useUser = function useUser() {\n  var context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useUser debe ser utilizado dentro de userprovider\");\n  }\n  return context;\n};\nexport { UserProvider, useUser };","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AsyncStorage","jsx","_jsx","UserContext","UserProvider","_ref","children","_useState","_useState2","_slicedToArray","userInfo","setUserInfo","_useState3","_useState4","isLoggedin","setIsLoggedIn","storeUserInfo","_ref2","_asyncToGenerator","user","setItem","JSON","stringify","error","console","_x","apply","arguments","checkAuthentication","_ref3","token","getItem","clearUserInfo","_ref4","removeItem","loadUserInfo","_ref5","storedUserInfo","parse","Provider","value","useUser","context","Error"],"sources":["/opt/frontend/app/contexts/UserContext.js"],"sourcesContent":["import { View, Text } from \"react-native\";\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nconst UserContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [userInfo, setUserInfo] = useState(null);\n  const [isLoggedin, setIsLoggedIn] = useState(false);\n\n  const storeUserInfo = async (user) => {\n    try {\n      await AsyncStorage.setItem(\"user_info\", JSON.stringify(user));\n      setUserInfo(user);\n      setIsLoggedIn(true);\n    } catch (error) {\n      console.error(\"Error al obtener la informacion del usuario;  \", error);\n    }\n  };\n\n  const checkAuthentication = async () => {\n    try {\n      const token = await AsyncStorage.getItem(\"access_token\");\n      setIsLoggedIn(!!token);\n    } catch (error) {\n      console.error(\"Error al autenticar\", error);\n    }\n  };\n\n  const clearUserInfo = async () => {\n    try {\n      await AsyncStorage.removeItem(\"user_info\");\n      setUserInfo(null);\n      setIsLoggedIn(false)\n    } catch (error) {\n      console.error(\"Error al limpiar la informaci贸n del usuario:\", error);\n    }\n  };\n\n  useEffect(() => {\n    const loadUserInfo = async () => {\n      try {\n        const storedUserInfo = await AsyncStorage.getItem(\"user_info\");\n        if (storedUserInfo) {\n          setUserInfo(JSON.parse(storedUserInfo));\n          setIsLoggedIn(true);\n        }\n      } catch (error) {\n        console.error(\"Error al cargar la informaci贸n del usuario:\", error);\n      }\n    };\n\n    loadUserInfo();\n    checkAuthentication();\n  }, []);\n\n  return (\n    <UserContext.Provider\n      value={{ userInfo, storeUserInfo, clearUserInfo, isLoggedin }}\n    >\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst useUser = () => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useUser debe ser utilizado dentro de userprovider\");\n  }\n  return context;\n};\nexport { UserProvider, useUser };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}