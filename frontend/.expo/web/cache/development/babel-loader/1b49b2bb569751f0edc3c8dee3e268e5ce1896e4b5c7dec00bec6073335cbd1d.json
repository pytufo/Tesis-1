{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar UserContext = createContext();\nvar UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setUserInfo = _useState2[1];\n  var storeUserInfo = function () {\n    var _ref2 = _asyncToGenerator(function* (user) {\n      try {\n        yield AsyncStorage.setItem(\"user_info\", JSON.stringify(user));\n        setUserInfo(user);\n      } catch (error) {\n        console.error(\"Error al obtener la informacion del usuario;  \", error);\n      }\n    });\n    return function storeUserInfo(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var isLogedin = function isLogedin() {\n    return !!userInfo;\n  };\n  var checkAuthentication = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var token = yield AsyncStorage.getItem(\"access_token\");\n        setIsLoggedIn(!!token);\n      } catch (error) {\n        console.error(\"Error al autenticar\", error);\n      }\n    });\n    return function checkAuthentication() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var clearUserInfo = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem(\"user_info\");\n        setUserInfo(null);\n      } catch (error) {\n        console.error(\"Error al limpiar la informaci贸n del usuario:\", error);\n      }\n    });\n    return function clearUserInfo() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var loadUserInfo = function () {\n      var _ref5 = _asyncToGenerator(function* () {\n        try {\n          var storedUserInfo = yield AsyncStorage.getItem(\"user_info\");\n          if (storedUserInfo) {\n            setUserInfo(JSON.parse(storedUserInfo));\n          }\n        } catch (error) {\n          console.error(\"Error al cargar la informaci贸n del usuario:\", error);\n        }\n      });\n      return function loadUserInfo() {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    loadUserInfo();\n  }, []);\n  return _jsx(UserContext.Provider, {\n    value: {\n      userInfo: userInfo,\n      storeUserInfo: storeUserInfo,\n      clearUserInfo: clearUserInfo\n    },\n    children: children\n  });\n};\nvar useUser = function useUser() {\n  var context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useUser debe ser utilizado dentro de userprovider\");\n  }\n  return context;\n};\nexport { UserProvider, useUser };","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AsyncStorage","jsx","_jsx","UserContext","UserProvider","_ref","children","_useState","_useState2","_slicedToArray","userInfo","setUserInfo","storeUserInfo","_ref2","_asyncToGenerator","user","setItem","JSON","stringify","error","console","_x","apply","arguments","isLogedin","checkAuthentication","_ref3","token","getItem","setIsLoggedIn","clearUserInfo","_ref4","removeItem","loadUserInfo","_ref5","storedUserInfo","parse","Provider","value","useUser","context","Error"],"sources":["/opt/frontend/app/contexts/UserContext.js"],"sourcesContent":["import { View, Text } from \"react-native\";\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nconst UserContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [userInfo, setUserInfo] = useState(null);\n\n  const storeUserInfo = async (user) => {\n    try {\n      await AsyncStorage.setItem(\"user_info\", JSON.stringify(user));\n      setUserInfo(user);\n    } catch (error) {\n      console.error(\"Error al obtener la informacion del usuario;  \", error);\n    }\n  };\n  const isLogedin = () => {\n    return !!userInfo;\n  };\n\n  const checkAuthentication = async () => {\n    try {\n      const token = await AsyncStorage.getItem(\"access_token\");\n      setIsLoggedIn(!!token);\n    } catch (error) {\n      console.error(\"Error al autenticar\", error);\n    }\n  };\n\n  const clearUserInfo = async () => {\n    try {\n      await AsyncStorage.removeItem(\"user_info\");\n      setUserInfo(null);\n    } catch (error) {\n      console.error(\"Error al limpiar la informaci贸n del usuario:\", error);\n    }\n  };\n\n  useEffect(() => {\n    const loadUserInfo = async () => {\n      try {\n        const storedUserInfo = await AsyncStorage.getItem(\"user_info\");\n        if (storedUserInfo) {\n          setUserInfo(JSON.parse(storedUserInfo));\n        }\n      } catch (error) {\n        console.error(\"Error al cargar la informaci贸n del usuario:\", error);\n      }\n    };\n\n    loadUserInfo();\n  }, []);\n\n  return (\n    <UserContext.Provider value={{ userInfo, storeUserInfo, clearUserInfo }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst useUser = () => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useUser debe ser utilizado dentro de userprovider\");\n  }\n  return context;\n};\nexport { UserProvider, useUser };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}