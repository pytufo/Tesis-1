{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Button from\"react-native-web/dist/exports/Button\";import React,{useEffect,useState}from\"react\";import{useRoute}from\"@react-navigation/native\";import{toast}from\"react-toastify\";import axios from\"axios\";import{API_BASE_URL,AUTH_ROUTES}from\"../../constants/API\";import{useUser}from\"../../contexts/UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetalleUsuarioScreen=function DetalleUsuarioScreen(){var route=useRoute();var userId=route.params.userId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),detalleUsuario=_useState2[0],setDetalleUsuario=_useState2[1];var _useUser=useUser(),userInfo=_useUser.userInfo;var accessToken=userInfo.access_token;useEffect(function(){var fethDetalleUsuario=function(){var _ref=_asyncToGenerator(function*(){try{var response=yield axios.get(`${API_BASE_URL}${AUTH_ROUTES.USUARIOS}${userId}/`,{headers:{Authorization:`Bearer ${accessToken}`}});console.log(\"usuario:\",response);setDetalleUsuario(response.data);}catch(error){console.error(\"Error al obtener los datos del usuario.\",error);}});return function fethDetalleUsuario(){return _ref.apply(this,arguments);};}();fethDetalleUsuario();},[userId]);var handleActivarCuenta=function(){var _ref2=_asyncToGenerator(function*(){try{yield axios.put(`${API_BASE_URL}${AUTH_ROUTES.USUARIOS}${userId}/activar/`);setDetalleUsuario(function(prevUsuario){return _objectSpread(_objectSpread({},prevUsuario),{},{is_active:true});});toast.success(\"El la cuenta ha sido activada exitosamente\");}catch(error){console.error(\"Error al activar la cuenta\",error);}});return function handleActivarCuenta(){return _ref2.apply(this,arguments);};}();return _jsx(View,{children:detalleUsuario?_jsxs(View,{children:[_jsx(Text,{children:\"Detalles del usuario \"}),_jsxs(Text,{children:[\" Nombre: \",detalleUsuario.username]}),_jsxs(Text,{children:[\" Apellido: \",detalleUsuario.last_name]}),_jsxs(Text,{children:[\" E-Mail: \",detalleUsuario.email]}),_jsxs(Text,{children:[\" role: \",detalleUsuario.role]}),detalleUsuario.is_active?_jsx(Text,{children:\" Cuenta activada\"}):_jsxs(View,{children:[_jsx(Text,{children:\" Cuenta pendiente de activacion por el administrador\"}),_jsx(Button,{title:\"Activar Cuenta\",onPress:handleActivarCuenta})]})]}):_jsx(Text,{children:\"DetalleUsuarioScreen\"})});};export default DetalleUsuarioScreen;","map":{"version":3,"names":["React","useEffect","useState","useRoute","toast","axios","API_BASE_URL","AUTH_ROUTES","useUser","jsx","_jsx","jsxs","_jsxs","DetalleUsuarioScreen","route","userId","params","_useState","_useState2","_slicedToArray","detalleUsuario","setDetalleUsuario","_useUser","userInfo","accessToken","access_token","fethDetalleUsuario","_ref","_asyncToGenerator","response","get","USUARIOS","headers","Authorization","console","log","data","error","apply","arguments","handleActivarCuenta","_ref2","put","prevUsuario","_objectSpread","is_active","success","View","children","Text","username","last_name","email","role","Button","title","onPress"],"sources":["/home/pytufo/Escritorio/Tesis-master/frontend/screens/users/DetalleUsuarioScreen.js"],"sourcesContent":["import { View, Text, Button } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { useRoute } from \"@react-navigation/native\";\nimport { toast } from \"react-toastify\";\n\n\nimport axios from \"axios\";\n\nimport { API_BASE_URL, AUTH_ROUTES } from \"../../constants/API\";\nimport { useUser } from \"../../contexts/UserContext\";\n\nconst DetalleUsuarioScreen = () => {\n  const route = useRoute();\n  const { userId } = route.params;\n  const [detalleUsuario, setDetalleUsuario] = useState(null);\n\n  const {userInfo} = useUser()\n  const accessToken = userInfo.access_token;\n\n  useEffect(() => {\n    const fethDetalleUsuario = async () => {\n      try {\n        const response = await axios.get(\n          `${API_BASE_URL}${AUTH_ROUTES.USUARIOS}${userId}/`,\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n        console.log(\"usuario:\", response);\n        setDetalleUsuario(response.data);\n      } catch (error) {\n        console.error(\"Error al obtener los datos del usuario.\", error);\n      }\n    };\n    fethDetalleUsuario();\n  }, [userId]);\n\n  const handleActivarCuenta = async () => {\n    try {\n      await axios.put(\n        `${API_BASE_URL}${AUTH_ROUTES.USUARIOS}${userId}/activar/`\n      );\n      setDetalleUsuario((prevUsuario) => ({\n        ...prevUsuario,\n        is_active: true,\n      }));\n      toast.success(\"El la cuenta ha sido activada exitosamente\");\n    } catch (error) {\n      console.error(\"Error al activar la cuenta\", error);\n    }\n  };\n\n  return (\n    <View>\n      {detalleUsuario ? (\n        <View>\n          <Text>Detalles del usuario </Text>\n          <Text> Nombre: {detalleUsuario.username}</Text>\n          <Text> Apellido: {detalleUsuario.last_name}</Text>\n          <Text> E-Mail: {detalleUsuario.email}</Text>\n          <Text> role: {detalleUsuario.role}</Text>\n          {detalleUsuario.is_active ? (\n            <Text> Cuenta activada</Text>\n          ) : (\n            <View>\n              <Text> Cuenta pendiente de activacion por el administrador</Text>\n              <Button title=\"Activar Cuenta\" onPress={handleActivarCuenta} />\n            </View>\n          )}\n        </View>\n      ) : (\n        <Text>DetalleUsuarioScreen</Text>\n      )}\n    </View>\n  );\n};\n\nexport default DetalleUsuarioScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}