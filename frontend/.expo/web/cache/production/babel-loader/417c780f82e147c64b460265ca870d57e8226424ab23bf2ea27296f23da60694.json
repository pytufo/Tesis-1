{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import FlatList from\"react-native-web/dist/exports/FlatList\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{API_BASE_URL,AUTH_ROUTES}from\"../../constants/API\";import{tableStyles}from\"../../constants/Colors\";import{useUser}from\"../../contexts/UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UsersListScreen=function UsersListScreen(_ref){var navigation=_ref.navigation;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useUser=useUser(),userInfo=_useUser.userInfo;var accessToken=userInfo.access_token;useEffect(function(){var fetchUser=function(){var _ref2=_asyncToGenerator(function*(){try{var response=yield axios.get(`${API_BASE_URL}${AUTH_ROUTES.USUARIOS}`,{headers:{Authorization:`Bearer ${accessToken}`}});setUser(response.data);}catch(error){console.log(\"Error al obtener los usuarios\",error);}});return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();},[]);var handleSearch=function handleSearch(text){setSearchQuery(text);var filteredUsers=user.filter(function(item){return item.email.toLowerCase().includes(searchQuery.toLowerCase());});setUser(filteredUsers);};var renderTableHeader=function renderTableHeader(){return _jsxs(View,{style:tableStyles.tableHeader,children:[_jsx(Text,{style:tableStyles.headerText,children:\"Usuario\"}),_jsx(Text,{style:tableStyles.headerText,children:\"Estado de la cuenta\"})]});};var renderItem=function renderItem(_ref3){var item=_ref3.item;return _jsx(TouchableOpacity,{onPress:function onPress(){return handleUserPress(item.id);},children:_jsxs(View,{style:tableStyles.tableRow,children:[_jsx(Text,{style:tableStyles.cell,children:item.email}),_jsx(Text,{style:tableStyles.cell,children:item.is_active?_jsx(Text,{children:\" Cuenta activada\"}):_jsx(Text,{children:\" Cuenta pendiente de activacion por el administrador\"})})]})});};var handleUserPress=function handleUserPress(userId){navigation.navigate(\"DetalleUsuario\",{userId:userId});};return _jsxs(View,{style:styles.container,children:[_jsx(View,{style:{padding:10},children:_jsx(TextInput,{style:styles.searchInput,placeholder:\"Buscar usuarios...\",value:searchQuery,onChangeText:handleSearch})}),_jsxs(ScrollView,{children:[renderTableHeader(),_jsx(FlatList,{data:user,keyExtractor:function keyExtractor(item){return item.id.toString();},renderItem:renderItem})]})]});};var styles=StyleSheet.create({container:{flex:1},searchBar:{padding:10,backgroundColor:\"#fff\",borderBottomWidth:1,borderBottomColor:\"#ddd\"},searchInput:{height:40,borderColor:\"gray\",borderWidth:1,padding:10}});export default UsersListScreen;","map":{"version":3,"names":["React","useEffect","useState","axios","API_BASE_URL","AUTH_ROUTES","tableStyles","useUser","jsx","_jsx","jsxs","_jsxs","UsersListScreen","_ref","navigation","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","searchQuery","setSearchQuery","_useUser","userInfo","accessToken","access_token","fetchUser","_ref2","_asyncToGenerator","response","get","USUARIOS","headers","Authorization","data","error","console","log","apply","arguments","handleSearch","text","filteredUsers","filter","item","email","toLowerCase","includes","renderTableHeader","View","style","tableHeader","children","Text","headerText","renderItem","_ref3","TouchableOpacity","onPress","handleUserPress","id","tableRow","cell","is_active","userId","navigate","styles","container","padding","TextInput","searchInput","placeholder","value","onChangeText","ScrollView","FlatList","keyExtractor","toString","StyleSheet","create","flex","searchBar","backgroundColor","borderBottomWidth","borderBottomColor","height","borderColor","borderWidth"],"sources":["/home/pytufo/Escritorio/Tesis-master/frontend/screens/users/UsersListScreen.js"],"sourcesContent":["import {\n  View,\n  Text,\n  FlatList,\n  ScrollView,\n  TouchableOpacity,\n  TextInput,\n  StyleSheet,\n} from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { API_BASE_URL, AUTH_ROUTES } from \"../../constants/API\";\nimport { tableStyles } from \"../../constants/Colors\";\n\nimport { useUser } from \"../../contexts/UserContext\";\n\nconst UsersListScreen = ({ navigation }) => {\n  const [user, setUser] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const { userInfo } = useUser();\n  const accessToken = userInfo.access_token;\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await axios.get(\n          `${API_BASE_URL}${AUTH_ROUTES.USUARIOS}`,\n          {\n            headers: {\n              Authorization: `Bearer ${accessToken}`,\n            },\n          }\n        );\n        setUser(response.data);\n      } catch (error) {\n        console.log(\"Error al obtener los usuarios\", error);\n      }\n    };\n    fetchUser();\n  }, []);\n\n  const handleSearch = (text) => {\n    setSearchQuery(text);\n    const filteredUsers = user.filter((item) =>\n      item.email.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n    setUser(filteredUsers);\n  };\n\n  const renderTableHeader = () => (\n    <View style={tableStyles.tableHeader}>\n      <Text style={tableStyles.headerText}>Usuario</Text>\n      <Text style={tableStyles.headerText}>Estado de la cuenta</Text>\n    </View>\n  );\n\n  const renderItem = ({ item }) => (\n    <TouchableOpacity onPress={() => handleUserPress(item.id)}>\n      <View style={tableStyles.tableRow}>\n        <Text style={tableStyles.cell}>{item.email}</Text>\n        <Text style={tableStyles.cell}>\n          {item.is_active ? (\n            <Text> Cuenta activada</Text>\n          ) : (\n            <Text> Cuenta pendiente de activacion por el administrador</Text>\n          )}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  const handleUserPress = (userId) => {\n    navigation.navigate(\"DetalleUsuario\", { userId });\n  };\n  return (\n    <View style={styles.container}>\n      <View style={{ padding: 10 }}>\n        <TextInput\n          style={styles.searchInput}\n          placeholder=\"Buscar usuarios...\"\n          value={searchQuery}\n          onChangeText={handleSearch}          \n        />\n      </View>\n      <ScrollView>\n        {renderTableHeader()}\n        <FlatList\n          data={user}\n          keyExtractor={(item) => item.id.toString()}\n          renderItem={renderItem}\n        />\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  searchBar: {\n    padding: 10,\n    backgroundColor: \"#fff\",\n    borderBottomWidth: 1,\n    borderBottomColor: \"#ddd\",\n  },\n  searchInput: {\n    height: 40,\n    borderColor: \"gray\",\n    borderWidth: 1,\n    padding: 10,\n  },\n});\n\nexport default UsersListScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}