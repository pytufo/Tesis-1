{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Text from\"react-native-web/dist/exports/Text\";import Button from\"react-native-web/dist/exports/Button\";import TextInput from\"react-native-web/dist/exports/TextInput\";import View from\"react-native-web/dist/exports/View\";import React,{useState,useEffect}from\"react\";import AuthServices from\"../../services/AuthServices\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import{useUser}from\"../../contexts/UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginScreen=function LoginScreen(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,navigation=_ref.navigation;var _useUser=useUser(),storeUserInfo=_useUser.storeUserInfo;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleLogin=function(){var _ref2=_asyncToGenerator(function*(){try{var user=yield AuthServices.login(email,password);console.log(\"Respuesta: \",user);if(user.access_token){yield AsyncStorage.setItem(\"access_token\",user.access_token);storeUserInfo(user);setIsLoggedIn(true);}else{console.log(\"Token null o invalido\");}}catch(error){console.log(\"error al autenticar: \",error);}});return function handleLogin(){return _ref2.apply(this,arguments);};}();var navigateToSignup=function navigateToSignup(){navigation.navigate(\"Signup\");};return _jsxs(View,{style:{flex:1,alignItems:\"center\",justifyContent:\"center\"},children:[_jsx(TextInput,{placeholder:\"Email\",onChangeText:setEmail}),_jsx(TextInput,{placeholder:\"Password\",secureTextEntry:true,onChangeText:setPassword}),_jsx(Button,{title:\"Login\",onPress:handleLogin}),_jsx(Text,{onPress:navigateToSignup,children:\"\\xBFNo tienes cuenta? Reg\\xEDstrate aqu\\xED\"})]});};export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","AuthServices","AsyncStorage","useUser","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","setIsLoggedIn","navigation","_useUser","storeUserInfo","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","handleLogin","_ref2","_asyncToGenerator","user","login","console","log","access_token","setItem","error","apply","arguments","navigateToSignup","navigate","View","style","flex","alignItems","justifyContent","children","TextInput","placeholder","onChangeText","secureTextEntry","Button","title","onPress","Text"],"sources":["/home/pytufo/Escritorio/Tesis-master/frontend/screens/auth/LoginScreen.js"],"sourcesContent":["import { Text, Button, TextInput, View } from \"react-native\";\nimport React, { useState, useEffect } from \"react\";\nimport AuthServices from \"../../services/AuthServices\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useUser } from \"../../contexts/UserContext\";\n\nconst LoginScreen = ({ setIsLoggedIn, navigation }) => {\n  const { storeUserInfo } = useUser();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleLogin = async () => {\n    try {\n      const user = await AuthServices.login(email, password);\n      console.log(\"Respuesta: \", user);\n      if (user.access_token) {\n        await AsyncStorage.setItem(\"access_token\", user.access_token);\n        storeUserInfo(user);\n        setIsLoggedIn(true);\n      } else {\n        console.log(\"Token null o invalido\");\n      }\n    } catch (error) {\n      console.log(\"error al autenticar: \", error);\n    }\n  };\n\n  const navigateToSignup = () => {\n    navigation.navigate(\"Signup\");\n  };\n\n  return (\n    <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\n      <TextInput placeholder=\"Email\" onChangeText={setEmail} />\n      <TextInput\n        placeholder=\"Password\"\n        secureTextEntry={true}\n        onChangeText={setPassword}\n      />\n      <Button title=\"Login\" onPress={handleLogin} />\n      <Text onPress={navigateToSignup}>¿No tienes cuenta? Regístrate aquí</Text>\n    </View>\n  );\n};\n\nexport default LoginScreen;\n"],"mappings":"0WACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,mCACnB,MAAO,CAAAC,YAAY,KAAM,2CAA2C,CACpE,OAASC,OAAO,kCAAqC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErD,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAC,IAAA,CAAsC,IAAhC,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CAAEC,UAAU,CAAAF,IAAA,CAAVE,UAAU,CAC9C,IAAAC,QAAA,CAA0BT,OAAO,CAAC,CAAC,CAA3BU,aAAa,CAAAD,QAAA,CAAbC,aAAa,CAErB,IAAAC,SAAA,CAA0Bf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAAgCpB,QAAQ,CAAC,EAAE,CAAC,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5B,GAAM,CAAAG,WAAW,gBAAAC,KAAA,CAAAC,iBAAA,CAAG,WAAY,CAC9B,GAAI,CACF,GAAM,CAAAC,IAAI,MAAS,CAAAzB,YAAY,CAAC0B,KAAK,CAACV,KAAK,CAAEI,QAAQ,CAAC,CACtDO,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEH,IAAI,CAAC,CAChC,GAAIA,IAAI,CAACI,YAAY,CAAE,CACrB,KAAM,CAAA5B,YAAY,CAAC6B,OAAO,CAAC,cAAc,CAAEL,IAAI,CAACI,YAAY,CAAC,CAC7DjB,aAAa,CAACa,IAAI,CAAC,CACnBhB,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLkB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACtC,CACF,CAAE,MAAOG,KAAK,CAAE,CACdJ,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEG,KAAK,CAAC,CAC7C,CACF,CAAC,iBAdK,CAAAT,WAAWA,CAAA,SAAAC,KAAA,CAAAS,KAAA,MAAAC,SAAA,OAchB,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BxB,UAAU,CAACyB,QAAQ,CAAC,QAAQ,CAAC,CAC/B,CAAC,CAED,MACE,CAAA7B,KAAA,CAAC8B,IAAI,EAACC,KAAK,CAAE,CAAEC,IAAI,CAAE,CAAC,CAAEC,UAAU,CAAE,QAAQ,CAAEC,cAAc,CAAE,QAAS,CAAE,CAAAC,QAAA,EACvErC,IAAA,CAACsC,SAAS,EAACC,WAAW,CAAC,OAAO,CAACC,YAAY,CAAE3B,QAAS,CAAE,CAAC,CACzDb,IAAA,CAACsC,SAAS,EACRC,WAAW,CAAC,UAAU,CACtBE,eAAe,CAAE,IAAK,CACtBD,YAAY,CAAEvB,WAAY,CAC3B,CAAC,CACFjB,IAAA,CAAC0C,MAAM,EAACC,KAAK,CAAC,OAAO,CAACC,OAAO,CAAE1B,WAAY,CAAE,CAAC,CAC9ClB,IAAA,CAAC6C,IAAI,EAACD,OAAO,CAAEd,gBAAiB,CAAAO,QAAA,CAAC,6CAAkC,CAAM,CAAC,EACtE,CAAC,CAEX,CAAC,CAED,cAAe,CAAAlC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}