{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{useNavigation,useRoute}from\"@react-navigation/native\";import axios from\"axios\";import{API_BASE_URL,API_ROUTES}from\"../../constants/API\";import{toast}from\"react-toastify\";import{Button}from\"react-native-paper\";import{useUser}from\"../../contexts/UserContext\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import MaterialServices from\"../../services/MaterialServices\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetalleMaterialScreen=function DetalleMaterialScreen(){var navigation=useNavigation();var route=useRoute();var materialId=route.params.materialId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),detalleMaterial=_useState2[0],setDetalleMaterial=_useState2[1];var _useUser=useUser(),userInfo=_useUser.userInfo;useEffect(function(){var fetchDetalleMaterial=function(){var _ref=_asyncToGenerator(function*(){try{var response=yield axios.get(`${API_BASE_URL}${API_ROUTES.MATERIALES}${materialId}/`);setDetalleMaterial(response.data);}catch(error){console.error(\"Error al obtener detales del material\",error);}});return function fetchDetalleMaterial(){return _ref.apply(this,arguments);};}();fetchDetalleMaterial();},[materialId]);var handleReservarMaterial=function(){var _ref2=_asyncToGenerator(function*(){try{var access_token=userInfo.access_token;yield MaterialServices.reservar(access_token,materialId);toast.success(\"La reserva ha sido creada exitosamente\");}catch(error){console.error(\"Error al realizar la reserva del material\",error);}});return function handleReservarMaterial(){return _ref2.apply(this,arguments);};}();return _jsx(View,{children:detalleMaterial?_jsxs(View,{children:[_jsx(Text,{children:\" Detalles del material:\"}),_jsxs(Text,{children:[\" Titulo: \",detalleMaterial.titulo,\" \"]}),_jsxs(Text,{children:[\"editorial:\",detalleMaterial.editorial.map(function(editorial){return _jsx(Text,{children:editorial.nombre},editorial.id);})]}),_jsxs(Text,{children:[\"Autor:\",detalleMaterial.autor.map(function(autor){return _jsxs(Text,{children:[autor.nombre,\", \",autor.apellido,\".\"]},autor.id);})]}),_jsxs(Text,{children:[\"carrera:\",detalleMaterial.carrera.map(function(carrera){return _jsx(Text,{children:carrera.nombre},carrera.id);})]}),_jsxs(Text,{children:[\"genero:\",detalleMaterial.genero.map(function(genero){return _jsx(Text,{children:genero.nombre},genero.id);})]}),detalleMaterial.estado===\"Disponible\"?_jsx(View,{children:_jsx(Button,{title:\"Reservar\",onPress:handleReservarMaterial})}):_jsx(Text,{children:\"El material no se encuentra disponible...\"})]}):_jsx(Text,{children:\" Cargando detalles...\"})});};export default DetalleMaterialScreen;","map":{"version":3,"names":["React","useEffect","useState","Text","View","FlatList","TouchableOpacity","useNavigation","useRoute","axios","API_BASE_URL","API_ROUTES","toast","Button","useUser","AsyncStorage","MaterialServices","jsx","_jsx","jsxs","_jsxs","DetalleMaterialScreen","navigation","route","materialId","params","_useState","_useState2","_slicedToArray","detalleMaterial","setDetalleMaterial","_useUser","userInfo","fetchDetalleMaterial","_ref","_asyncToGenerator","response","get","MATERIALES","data","error","console","apply","arguments","handleReservarMaterial","_ref2","access_token","reservar","success","children","titulo","editorial","map","nombre","id","autor","apellido","carrera","genero","estado","title","onPress"],"sources":["/home/pytufo/Escritorio/Tesis-master/frontend/screens/materiales/DetalleMaterialScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Text, View, FlatList, TouchableOpacity } from \"react-native\";\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\nimport axios from \"axios\";\nimport { API_BASE_URL, API_ROUTES } from \"../../constants/API\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"react-native-paper\";\nimport { useUser } from \"../../contexts/UserContext\";\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport MaterialServices from \"../../services/MaterialServices\";\n\nconst DetalleMaterialScreen = () => {\n  const navigation = useNavigation();\n  const route = useRoute();\n  const { materialId } = route.params;\n  const [detalleMaterial, setDetalleMaterial] = useState(null);\n\n  const { userInfo } = useUser();\n\n  useEffect(() => {\n    const fetchDetalleMaterial = async () => {\n      try {\n        const response = await axios.get(\n          `${API_BASE_URL}${API_ROUTES.MATERIALES}${materialId}/`\n        );\n        setDetalleMaterial(response.data);\n      } catch (error) {\n        console.error(\"Error al obtener detales del material\", error);\n      }\n    };\n    fetchDetalleMaterial();\n  }, [materialId]);\n\n  const handleReservarMaterial = async () => {\n    try {\n      const access_token = userInfo.access_token;\n      await MaterialServices.reservar(access_token, materialId);\n      toast.success(\"La reserva ha sido creada exitosamente\");\n    } catch (error) {\n      console.error(\"Error al realizar la reserva del material\", error);\n    }\n  };\n  return (\n    <View>\n      {detalleMaterial ? (\n        <View>\n          <Text> Detalles del material:</Text>\n          <Text> Titulo: {detalleMaterial.titulo} </Text>\n          <Text>\n            editorial:\n            {detalleMaterial.editorial.map((editorial) => (\n              <Text key={editorial.id}>{editorial.nombre}</Text>\n            ))}\n          </Text>\n          <Text>\n            Autor:\n            {detalleMaterial.autor.map((autor) => (\n              <Text key={autor.id}>\n                {autor.nombre}, {autor.apellido}.\n              </Text>\n            ))}\n          </Text>\n          <Text>\n            carrera:\n            {detalleMaterial.carrera.map((carrera) => (\n              <Text key={carrera.id}>{carrera.nombre}</Text>\n            ))}\n          </Text>\n          <Text>\n            genero:\n            {detalleMaterial.genero.map((genero) => (\n              <Text key={genero.id}>{genero.nombre}</Text>\n            ))}\n          </Text>\n          {detalleMaterial.estado === \"Disponible\" ? (\n            <View>\n              <Button title=\"Reservar\" onPress={handleReservarMaterial} />\n            </View>\n          ) : (\n            <Text>El material no se encuentra disponible...</Text>\n          )}\n        </View>\n      ) : (\n        <Text> Cargando detalles...</Text>\n      )}\n    </View>\n  );\n};\n\nexport default DetalleMaterialScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}